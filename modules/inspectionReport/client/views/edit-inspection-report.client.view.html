<section class="row">
    <div class='col-sm-10'>
        <h1 class="page-title">
            Inspection Reports
        </h1>
        <div class="panel panel-default">

            <div class="panel-heading">
                <h3 class="panel-title">Edit Inspection Report</h3>
            </div>

            <div class="panel-body">

                <!-- ================================ DISPLAY REPORT ================================ -->

                <div ng-show="editInspectionReport.reportOpen === false">
                    Hi there!
                    <button class="btn btn-default btn-sm" ng-click="editInspectionReport.openReport();">Edit Inspection Report</button>
                </div>

                <!-- ================================ EDIT REPORT ================================ -->

                <form ng-show="editInspectionReport.reportOpen" name="editInspectionReport.inspectionReportForm" ng-submit="editInspectionReport.submitInspectionReport(inspectionReportForm.$valid)" novalidate>

                    <div class="row">

                        <div class="col-sm-6">
                            <div class="form-group show-errors">
                                <label for="projectName" class="control-label">Project Name</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="projectName" name="projectName" class="form-control input-sm" ng-model="editInspectionReport.report.projectName" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.projectName.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.projectName"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="certificateNum" class="control-label">Certificate #</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="certificateNum" name="certificateNum" class="form-control input-sm" ng-model="editInspectionReport.report.certificateNum" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.certificateNum.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.certificateNum"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="certificateStatus" class="control-label">Certificate Status</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="certificateStatus" name="certificateStatus" class="form-control input-sm" ng-model="editInspectionReport.report.certificateStatus" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.certificateStatus.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.certificateStatus"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="region" class="control-label">Region</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="region" name="region" class="form-control input-sm" ng-model="editInspectionReport.report.region" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.region.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.region"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="trigger" class="control-label">Trigger</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="trigger" name="trigger" class="form-control input-sm" ng-model="editInspectionReport.report.trigger" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.trigger.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.trigger"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="sector" class="control-label">Sector</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="sector" name="sector" class="form-control input-sm" ng-model="editInspectionReport.report.sector" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.sector.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.sector"/>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group show-errors">
                                <label for="status" class="control-label">Inspection Report Status</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="status" name="status" class="form-control input-sm" ng-model="editInspectionReport.report.status" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.status.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.status"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="inspectionNum" class="control-label">Inspection #</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="inspectionNum" name="inspectionNum" class="form-control input-sm" ng-model="editInspectionReport.report.inspectionNum" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.inspectionNum.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.inspectionNum"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="inspectionDate" class="control-label">Inspection Date</label>
                                <p ng-if="editInspectionReport.mode == 'display'">{{ editInspectionReport.report.inspectionDate | date }}</p>
                                <p ng-if="editInspectionReport.mode !== 'display'">
                                    <a x-modal-date-picker x-selected-date="editInspectionReport.report.inspectionDate" class="btn btn-default btn-sm">{{ editInspectionReport.report.inspectionDate | date }} <i class="glyphicon glyphicon-calendar"></i></a>
                                </p>

                                <div ng-messages="editInspectionReport.inspectionReportForm.inspectionDate.$error" role="alert">
                                </div>
                            </div>

                            <div class="form-group show-errors">
                                <label for="office" class="control-label">Office</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="office" name="office" class="form-control input-sm" ng-model="editInspectionReport.report.office" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.office.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.office"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="inspectors" class="control-label">Inspector Name(s)</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="inspectors" name="inspectors" class="form-control input-sm" ng-model="editInspectionReport.report.inspectors" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.inspectors.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.inspectors"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="utm" class="control-label">UTM</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="utm" name="utm" class="form-control input-sm" ng-model="editInspectionReport.report.utm" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.utm.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.utm"/>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <hr />
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group show-errors">
                                <label for="locationDescription" class="control-label">Location Description</label>
                                <textarea ng-if="editInspectionReport.mode != 'display'" type="text" id="locationDescription" name="locationDescription" class="form-control input-sm" ng-model="editInspectionReport.report.locationDescription" required ></textarea>
                                <div ng-messages="editInspectionReport.inspectionReportForm.locationDescription.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.locationDescription"/>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="nonCompliantIncidences" class="control-label">Incidences of Non-Compliance Observed</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="nonCompliantIncidences" name="nonCompliantIncidences" class="form-control input-sm" ng-model="editInspectionReport.report.nonCompliantIncidences" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.nonCompliantIncidences.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.nonCompliantIncidences"/>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="nonComplianceDecisionMatrixLevel" class="control-label">Non-Compliance Decision Matrix Level</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="nonComplianceDecisionMatrixLevel" name="nonComplianceDecisionMatrixLevel" class="form-control input-sm" ng-model="editInspectionReport.report.nonComplianceDecisionMatrixLevel" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.nonComplianceDecisionMatrixLevel.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.nonComplianceDecisionMatrixLevel"/>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="nonComplianceDecisionMatrixCategory" class="control-label">Non-Compliance Decision Matrix Category</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="nonComplianceDecisionMatrixCategory" name="nonComplianceDecisionMatrixCategory" class="form-control input-sm" ng-model="editInspectionReport.report.nonComplianceDecisionMatrixCategory" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.nonComplianceDecisionMatrixCategory.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.nonComplianceDecisionMatrixCategory"/>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group show-errors">
                                <label for="inspectionSummary" class="control-label">Inspection Summary</label>
                                <textarea ng-if="editInspectionReport.mode != 'display'" type="text" id="inspectionSummary" name="inspectionSummary" class="form-control input-sm" ng-model="editInspectionReport.report.inspectionSummary" required ></textarea>
                                <div ng-messages="editInspectionReport.inspectionReportForm.inspectionSummary.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.inspectionSummary"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="certificateOrAct" class="control-label">Certificate or Act</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="certificateOrAct" name="certificateOrAct" class="form-control input-sm" ng-model="editInspectionReport.report.certificateOrAct" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.certificateOrAct.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.certificateOrAct"/>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group show-errors">
                                <label for="activity" class="control-label">Activity</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="activity" name="activity" class="form-control input-sm" ng-model="editInspectionReport.report.activity" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.activity.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.activity"/>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group show-errors">
                                <label for="response" class="control-label">Response</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="response" name="response" class="form-control input-sm" ng-model="editInspectionReport.report.response" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.response.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.response"/>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <hr />
                        </div>


                        <div class="col-sm-6">
                            <div class="form-group show-errors">
                                <label for="certificateHolderName" class="control-label">Certificate Holder's Name</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="certificateHolderName" name="certificateHolderName" class="form-control input-sm" ng-model="editInspectionReport.report.certificateHolderName" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.certificateHolderName.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.certificateHolderName"/>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group show-errors">
                                <label for="certificateHolderContacts" class="control-label">Certificate Holder Contacts</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="certificateHolderContacts" name="certificateHolderContacts" class="form-control input-sm" ng-model="editInspectionReport.report.certificateHolderContacts" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.certificateHolderContacts.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.certificateHolderContacts"/>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group show-errors">
                                <label for="inAttendance" class="control-label">In Attendance</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="inAttendance" name="inAttendance" class="form-control input-sm" ng-model="editInspectionReport.report.inAttendance" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.inAttendance.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.inAttendance"/>
                            </div>

                            <div class="form-group show-errors">
                                <label for="address1" class="control-label">Mailing Address (line 1)</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="address1" name="address1" class="form-control input-sm" ng-model="editInspectionReport.report.address1" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.address1.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.address1"/>
                            </div>
                            <div class="form-group show-errors">
                                <label for="address1" class="control-label">Mailing Address (line2)</label>

                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="address2" name="address2" class="form-control input-sm" ng-model="editInspectionReport.report.address2" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.address2.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.address2"/>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="city" class="control-label">City</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="city" name="city" class="form-control input-sm" ng-model="editInspectionReport.report.city" placeholder="City" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.city.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.city"/>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="postal" class="control-label">Postal Code</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="postal" name="postal" class="form-control input-sm" ng-model="editInspectionReport.report.postal" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.postal.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.postal"/>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="province" class="control-label">Province</label>
                                <select id="province" name="province" ng-if="editInspectionReport.mode != 'display'" class="form-control input-sm" ng-model="editInspectionReport.report.province" ng-options="key as value for (key, value) in editInspectionReport.provs" required></select>
                                <div ng-messages="editInspectionReport.inspectionReportForm.province.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.provs[editInspectionReport.report.province]"/>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="phone" class="control-label">Phone</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="phone" name="phone" class="form-control input-sm" ng-model="editInspectionReport.report.phone" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.phone.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.phone"/>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="fax" class="control-label">Fax</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="fax" name="fax" class="form-control input-sm" ng-model="editInspectionReport.report.fax" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.fax.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.fax"/>
                            </div>
                        </div>

                        <div class="col-sm-4">

                            <div class="form-group show-errors">
                                <label for="contactEmail" class="control-label">Contact Email</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="contactEmail" name="contactEmail" class="form-control input-sm" ng-model="editInspectionReport.report.contactEmail" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.contactEmail.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.contactEmail"/>
                            </div>
                        </div>

                    </div>

                    <hr />

                    <div class="row">
                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="inspector" class="control-label">Inspection Conducted By</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="inspector" name="inspector" class="form-control input-sm" ng-model="editInspectionReport.report.inspector" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.inspector.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.inspector"/>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="signature" class="control-label">Signature</label>
                                <input ng-if="editInspectionReport.mode != 'display'" type="text" id="signature" name="signature" class="form-control input-sm" ng-model="editInspectionReport.report.signature" required />
                                <div ng-messages="editInspectionReport.inspectionReportForm.signature.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.signature"/>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group show-errors">
                                <label for="dateSigned" class="control-label">Date Signed</label>
                                <p ng-if="editInspectionReport.mode == 'display'">{{ editInspectionReport.report.dateSigned | date }}</p>
                                <p ng-if="editInspectionReport.mode !== 'display'">
                                    <a x-modal-date-picker x-selected-date="editInspectionReport.report.dateSigned" class="btn btn-default btn-sm">{{ editInspectionReport.report.dateSigned | date }} <i class="glyphicon glyphicon-calendar"></i></a>
                                </p>

                                <div ng-messages="editInspectionReport.inspectionReportForm.dateSigned.$error" role="alert">
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group show-errors">
                                <label for="enclosuresAndDescription" class="control-label">Location Description</label>
                                <textarea ng-if="editInspectionReport.mode != 'display'" type="text" id="enclosuresAndDescription" name="enclosuresAndDescription" class="form-control input-sm" ng-model="editInspectionReport.report.enclosuresAndDescription" required ></textarea>
                                <div ng-messages="editInspectionReport.inspectionReportForm.enclosuresAndDescription.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.enclosuresAndDescription"/>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group show-errors">
                                <label for="regulatoryConsideration" class="control-label">Regulatory Consideration</label>
                                <textarea ng-if="editInspectionReport.mode != 'display'" type="text" id="regulatoryConsideration" name="regulatoryConsideration" class="form-control input-sm" ng-model="editInspectionReport.report.regulatoryConsideration" required ></textarea>
                                <div ng-messages="editInspectionReport.inspectionReportForm.regulatoryConsideration.$error" role="alert">
                                </div>
                                <p ng-if="editInspectionReport.mode == 'display'" ng-bind="editInspectionReport.report.regulatoryConsideration"/>
                            </div>
                        </div>

                    </div>

                    <div class="text-right">
                        <div class="form-group">
                            <button ng-if="editInspectionReport.mode != 'display'" type="submit" class="btn btn-default button-sm " ><span class="glyphicon glyphicon-floppy-disk"></span> Save</button>
                            <button ng-if="editInspectionReport.mode != 'display'" type="button" class="btn btn-default button-sm" ng-click="editInspectionReport.cancel();" ><span class="glyphicon glyphicon-remove"></span> Cancel</button>
                            <button ng-if="editInspectionReport.mode == 'edit'" class="btn btn-default btn-danger" ng-click="editInspectionReport.remove();"><i class="glyphicon glyphicon-trash"></i> Delete</button>
                            <button ng-if="editInspectionReport.mode == 'display'" class="btn btn-default btn-small" ui-sref="inspectionReport.edit({inspectionReportId: editInspectionReport.report._id})"><i class="glyphicon glyphicon-edit"></i> Edit</button>
                        </div>
                        <div ng-show="error" class="text-danger">
                            <strong ng-bind="error"></strong>
                        </div>
                    </div>

                </form>

                <hr/>

                <!-- ================================ INSPECTION DETAILS ================================ -->

                <h3>Inspection Details</h3>

                <div ng-repeat="detail in editInspectionReport.report.inspectionDetails">

                    <!-- ================================ EDIT DETAIL ================================ -->

                    <div ng-show="detail.editMode">

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group show-errors">
                                    <label for="complianceTypes" class="control-label">Types of Compliance</label>
                                    <input type="text" id="complianceTypes" name="complianceTypes" class="form-control input-sm" ng-model="detail.copy.complianceTypes" required />
                                    <div ng-messages="detail.complianceTypes.$error" role="alert">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group show-errors">
                                    <label for="compliance" class="control-label">Compliance</label>
                                    <input type="text" id="compliance" name="compliance" class="form-control input-sm" ng-model="detail.copy.compliance" required />
                                    <div ng-messages="detail.compliance.$error" role="alert">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group show-errors">
                            <label for="requirementDescription" class="control-label">Requirement Description</label>
                            <textarea type="text" id="requirementDescription" name="requirementDescription" class="form-control input-sm" ng-model="detail.copy.requirementDescription" required ></textarea>
                            <div ng-messages="detail.requirementDescription.$error" role="alert">
                            </div>
                        </div>

                        <div class="form-group show-errors">
                            <label for="findings" class="control-label">Findings</label>
                            <textarea type="text" id="findings" name="findings" class="form-control input-sm" ng-model="detail.copy.findings" required ></textarea>
                            <div ng-messages="detail.findings.$error" role="alert">
                            </div>
                        </div>

                        <div class="form-group">
                            <button ng-click="editInspectionReport.updateDetail(detail)" class="btn btn-default btn-sm">Update</button>
                            <button ng-click="editInspectionReport.removeDetail(detail)" class="btn btn-danger btn-sm">Remove</button>
                        </div>
                        <hr/>

                    </div>

                    <!-- ================================ DISPLAY MODE ================================ -->

                    <div ng-show="!detail.editMode" class="well well-sm">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group show-errors">
                                    <label for="complianceTypes" class="control-label">Types of Compliance</label>
                                    <p ng-bind="detail.complianceTypes"/>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group show-errors">
                                    <label for="compliance" class="control-label">Compliance</label>
                                    <p ng-bind="detail.compliance"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-group show-errors">
                            <label for="requirementDescription" class="control-label">Requirement Description</label>
                            <p ng-bind="detail.requirementDescription"/>
                        </div>

                        <div class="form-group show-errors">
                            <label for="requirementDescription" class="control-label">Findings</label>
                            <p ng-bind="detail.requirementDescription"/>
                        </div>
                        <button ng-click="editInspectionReport.editDetail(detail)" class="btn btn-default btn-sm">Edit</button>
                    </div>

                </div>


                <!-- ================================ ADD NEW DETAIL ================================ -->

            <button ng-show="editInspectionReport.addDetailOpen === false" class="btn btn-default btn-sm" ng-click="editInspectionReport.openDetailForm()">Add Inspection Detail</button>

            <form ng-show="editInspectionReport.addDetailOpen" name="editInspectionReport.addDetailForm" ng-submit="editInspectionReport.addDetail(editInspectionReport.addDetailForm.$valid)" novalidate>

                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group show-errors">
                            <label for="complianceTypes" class="control-label">Types of Compliance</label>
                            <input type="text" id="complianceTypes" name="complianceTypes" class="form-control input-sm" ng-model="editInspectionReport.newDetail.complianceTypes" required />
                            <div ng-messages="editInspectionReport.newDetail.complianceTypes.$error" role="alert">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group show-errors">
                            <label for="compliance" class="control-label">Compliance</label>
                            <input type="text" id="compliance" name="compliance" class="form-control input-sm" ng-model="editInspectionReport.newDetail.compliance" required />
                            <div ng-messages="editInspectionReport.newDetail.compliance.$error" role="alert">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group show-errors">
                    <label for="requirementDescription" class="control-label">Requirement Description</label>
                    <textarea type="text" id="requirementDescription" name="requirementDescription" class="form-control input-sm" ng-model="editInspectionReport.newDetail.requirementDescription" required ></textarea>
                    <div ng-messages="editInspectionReport.newDetail.requirementDescription.$error" role="alert">
                    </div>
                </div>

                <div class="form-group show-errors">
                    <label for="findings" class="control-label">Findings</label>
                    <textarea type="text" id="findings" name="findings" class="form-control input-sm" ng-model="editInspectionReport.newDetail.findings" required ></textarea>
                    <div ng-messages="editInspectionReport.newDetail.findings.$error" role="alert">
                    </div>
                </div>

                <a ng-if="editInspectionReport.mode != 'display'" class="btn-default btn-sm" ng-click="editInspectionReport.saveNewDetail(editInspectionReport.newDetail)">Save New Detail</a>

                <hr/>

            </form>

            </div>
        </div>
    </div>
    </div>
    <div class='col-sm-2'>
        <tmpl-system-menu x-menu-context="'settings'"></tmpl-system-menu>
    </div>
</section>
